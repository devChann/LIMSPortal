@page "{id?}/{handler?}"
@model IndexModel

@using Microsoft.AspNetCore.Identity
@using LIMS.Infrastructure.Identity

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@{
	ApplicationUser user = await UserManager.FindByNameAsync(User.Identity.Name);
}

<div>
	<ol class="breadcrumb">
		<li class="breadcrumb-item">
			<a asp-controller="Home" asp-action="Index">Tenure</a>
		</li>
		<li class="breadcrumb-item active">Tenure-List</li>
	</ol>
</div>

<section class="row">
	<div class="col-md-12">
		@if (Model.Message != null)
		{
			<div class="alert alert-info alert-dismissible" role="alert">
				<button type="button" class="close" data-dismiss="alert" aria-label="close">
					<span aria-hidden="true">&times;</span>
				</button>
				@Model.Message
			</div>

		}

		<div class="card">
			<div class="card-header">
				<h4 class="card-title">Tenure List</h4>

			</div>
			<div class="card-content">
				<div class="card-body">
					@if (await UserManager.IsInRoleAsync(user, "Administrator"))
					{						
						<a asp-page="Create" class="btn btn-primary btn-sm mb-1"><i class="fa fa-plus-circle"></i> Create New Tenure</a>
					}
				<div class="table-responsive">
					
						@if (Model.Tenures.Count() > 0)
						{
							<table class="table table-lg mb-0">
								<thead>
									<tr class="">
										<th>
											Tenure Type@*@Html.DisplayNameFor(m => m.Tenures.FirstOrDefault().TenureType)*@
										</th>
										<th>
											Start Date @*@Html.DisplayNameFor(m => m.Tenures.FirstOrDefault().TenureBeginDate)*@
										</th>
										<th>
											End Date @*@Html.DisplayNameFor(m => m.Tenures.FirstOrDefault().TenureEndDate)*@
										</th>
										<th></th>
									</tr>
								</thead>
								<tbody>
									@foreach (var tenure in Model.Tenures)
									{
										<tr>
											<td>
												@Html.DisplayFor(m => tenure.TenureType)
											</td>
											<td>
												@Html.DisplayFor(m => tenure.TenureBeginDate)
											</td>
											<td>
												@Html.DisplayFor(m => tenure.TenureEndDate)
											</td>
											<td>
												<form method="post">
													<button asp-page-handler="Delete" asp-route-id="@tenure.TenureId"
															onclick="return confirm('Are you sure you want to delete this book?');"
															class="btn btn-danger btn-sm">
														Delete
													</button>
													<a asp-route-id="@tenure.TenureId" asp-page="Edit" class="btn btn-success btn-sm">Edit</a>
												</form>
											</td>
										</tr>
									}
								</tbody>								
								
							</table>
						}
						else
						{
							<p>
								No Tenure types available.
							</p>
						}
					
				</div>
				</div>
			</div>

		</div>
	</div>






</section>

@section Scripts{
	@{ await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}


