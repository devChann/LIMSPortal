var vectorSource=new ol.source.Vector,vector=new ol.layer.Vector({source:vectorSource,style:new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba(0, 0, 255, 1.0)",width:2})})}),raster=new ol.layer.Tile({source:new ol.source.OSM}),map=new ol.Map({layers:[raster],target:document.getElementById("map"),view:new ol.View({center:[4098004.08,-142987.72],maxZoom:30,zoom:18})}),featureRequest=(new ol.format.WFS).writeGetFeature({srsName:"EPSG:3857",featureNS:"http://www.intergraph.com/geomedia/gml",featurePrefix:"gmgml",featureTypes:["Parcels"],outputFormat:"application/vnd.geo+json",filter:ol.format.filter.equalTo("Id",routeId)}),requestBody=(new XMLSerializer).serializeToString(featureRequest);fetch("https://demo.osl.co.ke:7575/LIMSParcels/service.svc/post",{method:"POST",body:requestBody,headers:new Headers({"Content-Type":"application/xml"})}).then(function(n){var t=n.headers.get("content-type");if(console.log(t),t&&t.includes("application/vnd.geo+json"))return n.json();throw new TypeError("Oops, we haven't got JSON!");}).then(function(n){var t=(new ol.format.GeoJSON).readFeatures(n);vectorSource.addFeatures(t);map.getView().fit(vectorSource.getExtent())});var throbberCounter=0,increaseThrobberCounter=function(){document.getElementById("throbber").style.display="block";++throbberCounter},decreaseThrobberCounter=function(){--throbberCounter;throbberCounter<=0&&(throbberCounter=0,document.getElementById("throbber").style.display="none")},onChangeVisible=function(n){n.oldValue&&this.throbberVisible?(decreaseThrobberCounter(),this.throbberVisible=!1):n.oldValue||this.throbberVisible||(increaseThrobberCounter(),this.throbberVisible=!0)},onRender=function(){this.throbberVisible&&(decreaseThrobberCounter(),this.throbberVisible=!1)};vector.on("change:visible",onChangeVisible);vector.on("render",onRender);map.addLayer(vector);