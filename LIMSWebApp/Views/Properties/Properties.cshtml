@using Microsoft.AspNetCore.Identity
@using LIMSInfrastructure.Identity

@model IEnumerable<LIMSWebApp.ViewModels.PropertiesViewModesl.PropertiesViewModel>

@inject UserManager<ApplicationUser> UserManager

@{
    ViewData["Title"] = "PropertiesView";
}

<div class="row">
    <div class="col-md-8">
        <h4>My Properties</h4>

        @*<div>
            <span class="text-lg-left">Owner:</span> <span class="text-lg-right">@UserManager.GetUserName(User)</span>
        </div>*@



        @if (Model.Any())
        {
            <div class="table-responsive table-sm">
                <table class="table table-hover table-light">
                    <thead class="thead-dark">
                        <tr>

                            <th>
                                @Html.DisplayNameFor(model => model.ParcelNum)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.TenureType)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Rate)
                            </th>

                            <th>
                                Rates Status
                            </th>
                            <th>
                                Actions
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>

                                <td>
                                    @Html.DisplayFor(modelItem => item.ParcelNum)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.TenureType)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Rate)
                                </td>
                                <td>
                                    <span class="btn btn-sm btn-info"><i class="fa fa-check-circle"></i> Paid</span>
                                </td>
                                
                                <td>
                                    @*@Html.ActionLink("Details", "SearchParcel", "ParcelsIndex", new { parcelnum = item.ParcelNum }, new { @class = "btn btn-sm btn-outline-info" })*@
                                    <a href="@Url.Action("SearchParcel", "ParcelsIndex", new { parcelnum = item.ParcelNum })" class="btn btn-sm btn-outline-primary">
                                        <i class="fa fa-info-circle"></i>
                                        <span>
                                            <strong>Details</strong>
                                        </span>
                                    </a>
                                    @*@Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })*@
                                    @*@Html.ActionLink("Rates Payment", "Payments", "Index", new { parcelnum = item.ParcelNum }, new { @class = "btn btn-outline-info" })*@
                                    @*@Html.ActionLink("New Payment", "", new { @data_toggle = "modal", @data_target = "#PaymentNotification" }, new { @class = "btn btn-outline-info" })*@
                                    <span class="btn btn-sm btn-outline-warning" data-toggle="modal" data-target="#PaymentNotification"><i class="fa fa-money-bill-alt"></i> New Payment</span>

                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>


        }
        else
        {
            <p class="alert-info"></p>
            <div class="alert alert-info">
                <strong>You do not own any property.</strong>
            </div>

        }

        @*<a class="btn btn-outline-info" role="button" asp-controller="Account" asp-action="UserProfile">Go to Services</a>*@
    </div>

</div>

@*Modal dialog*@
<div class="modal fade" id="PaymentNotification" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">LIMS Portal</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Your About to be re-directed to an external payment link do you wish to continue?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>               
                <a class="btn btn-info" asp-controller="Payments" asp-action="Index">Continue</a>
            </div>
        </div>
    </div>
</div>



